# InvestHub Performance Ledger System - Detailed Overview

**Date:** January 20, 2026
**Module Version:** 1.0 (Live)

This document details the newly implemented **Performance Ledger System**, explaining exactly what functionality exists, how it works, and what is visible to Admins vs. Users.

---

## 1. Core Concept: The "Source of Truth"
Previously, InvestHub was a "Wallet Application" (Money In $\to$ Money Out).
Now, it is a **Performance-Driven Platform**. 

We introduced a core entity called the **`PerformancePeriod`**. This acts as the immutable "Proof of Performance" for why profits are being distributed.

### The Golden Rule Implementation
1.  **Drafting:** Admins declare performance data (Draft Mode).
2.  **Locking:** Admins review and **LOCK** the period.
3.  **Publishing:** Only **LOCKED** periods are visible to Users.
4.  **Binding:** Profit Distributions must reference a **LOCKED** period.

---

## 2. What is Visible to the ADMIN?
**Location:** `/admin/performance`

The Admin has full control and sees the "Raw Machinery" behind the math.

### A. The "Declaration Engine" (Input Form)
Admins enter the following raw data:
*   **Period Type:** Monthly / Quarterly / Yearly.
*   **Period Label:** e.g., "Jan 2026", "Q1 2026".
*   **Gross Profit (â‚¹):** Total trading gains.
*   **Gross Loss (â‚¹):** Total trading losses (optional).
*   **Capital Deployed (â‚¹):** The actual fund amount used for trading.
*   **Notes:** Private/Public notes about market conditions.

### B. The "Intelligence Panel" (Exclusive Admin Insight)
*New in Phase 3.* This panel analyzes your own data to give you feedback:
*   **Consistency Score (0-100):** How stable is your ROI? (Calculated via Standard Deviation).
*   **Integrity Check:** `[Safe/Flagged]` - Checks if the `Investor Share` you declared matches the actual money distributed to wallets.
*   **Growth Signal:** `[Scale Up / Hold / Reduce Risk]` - based on capital deployment trends.

### C. The History Table
Admins see a full list of all periods with statuses:
*   **Draft:** Editable, Invisible to users.
*   **Locked:** Read-only, Visible to users.
*   **Distributed:** Marked with a green check if payouts have been sent.

---

## 3. What is Visible to the USER?
**Location:** `/dashboard/performance`

Users see a polished, "Trust-Optimized" view. They **DO NOT** see raw admin logs, "Gross Loss", or internal admin notes unless specified.

### A. The Trust Dashboard (Visuals)
*   **ROI Consistency Chart (Area Chart):** A smooth green curve showing the ROI % trend over time.
    *   *Psychology:* Shows stability and growth.
*   **Net Profit Growth (Bar Chart):** Blue bars showing absolute profit generated per month.
    *   *Psychology:* Shows the scale of operations.

### B. Key Metrics (Summary Cards)
*   **Total System Profit:** The sum of all *Net Profits* generated by the platform.
*   **Average ROI / Period:** The mathematical average of all locked periods.
*   **Best Performing Month:** e.g., "Jan 2026 (+5.2%)".
*   **Your Total Share:** The exact amount that has landed in *their* specific wallet.

### C. The "Attribution Ledger" (Personalized)
This is the most critical feature for trust. It answers: *"Where did my money come from?"*

| Date | Event | Your Share | Tax (TDS) | Status |
| :--- | :--- | :--- | :--- | :--- |
| Jan 19, 2026 | Profit Share: Jan 2026 | â‚¹72.79 | - | Paid âœ… |

*   **Linking:** The "Event" name is automatically pulled from the Linked Performance Period.

---

## 4. The "Binding" Mechanism (Admin Operations)
**Location:** `/admin/operations` -> **Profit Engine**

When an Admin goes to distribute profit, they now see a **Dropdown Menu**:
*   **Option 1:** "Select Ad-hoc / Manual" (Old way).
*   **Option 2:** "Link to: Jan 2026 (Net: â‚¹1,00,000)".

**If Option 2 is selected:**
1.  The system **Auto-Fills** the distribution amount from the Performance Period.
2.  The system **Marks** the Performance Period as "Distributed" (preventing double payment).
3.  The User receives a notification saying: *"You received profit for **Jan 2026**"* instead of a generic message.

---

## Summary of Visibility

| Feature | Admin Sees | User Sees |
| :--- | :--- | :--- |
| **Gross Profit/Loss** | âœ… Yes | âŒ No (Only Net Profit) |
| **Capital Deployed** | âœ… Yes | ğŸ›ï¸ In Charts (Implicitly) |
| **ROI Percentage** | âœ… Yes | âœ… Yes (Key Metric) |
| **Draft Periods** | âœ… Yes | âŒ No |
| **Locked Periods** | âœ… Yes | âœ… Yes |
| **Internal Notes** | âœ… Yes | âŒ No |
| **Consistency Score** | âœ… Yes | âŒ No |
| **Attribution Logic** | âŒ (Global View) | âœ… (Personal View) |

---
*Document Generated by Antigravity - Jan 20, 2026*
